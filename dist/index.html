<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>COStreamJS-Test</title>
</head>

<body>
    <div id="app" style="width:100vh">
    </div>

    <script src="./global.js"></script>
    <script src="./parser.js"></script>
    <script src="https://cdn.bootcss.com/vue/2.6.10/vue.js"></script>
    <script src="https://cdn.bootcss.com/viz.js/2.1.2/viz.js"></script>
    <script src="https://cdn.bootcss.com/viz.js/2.1.2/lite.render.js"></script>

    <script>
var str = 
`digraph {
            node [shape = record];
            0 [label = "<0> 4 CompUnits"];
            1 [label = "<0> const|<1> int|<2> 2 ConstDefs"];
            2 [label = "<0>  |<1> =|<2>  "];
            3 [label = "<0> x"];
            4 [label = "<0> 1"];
            2:0 -> 3;
            2:2 -> 4;
            1:2 -> 2;
            5 [label = "<0> b|<1> [|<2>  |<3> ]|<4> =|<5> \\{|<6> 2 Exps|<7> \\}"];
            6 [label = "<0> 2"];
            5:2 -> 6;
            7 [label = "<0> a"];
            5:6 -> 7;
            8 [label = "<0> b"];
            5:6 -> 8;
            1:2 -> 5;
            0:0 -> 1;
            9 [label = "<0> int|<1> 1 VarDefs"];
            10 [label = "<0> a|<1> [|<2> ]|<3> =|<4> \\{|<5> 4 Exps|<6> \\}"];
            11 [label = "<0> 1"];
            10:5 -> 11;
            12 [label = "<0> 2"];
            10:5 -> 12;
            13 [label = "<0> 3"];
            10:5 -> 13;
            14 [label = "<0> 4"];
            10:5 -> 14;
            9:1 -> 10;
            0:0 -> 9;
            15 [label = "<0> void|<1> swap|<2> ( )|<3> \\{|<4> 1 BlockItems|<5> \\}"];
            16 [label = "<0>  |<1> =|<2>  "];
            17 [label = "<0> x"];
            18 [label = "<0>  |<1> /|<2>  "];
            19 [label = "<0> (|<1>  |<2> )"];
            20 [label = "<0>  |<1> +|<2>  "];
            21 [label = "<0> 1"];
            22 [label = "<0> 2"];
            20:0 -> 21;
            20:2 -> 22;
            19:1 -> 20;
            23 [label = "<0> 3"];
            18:0 -> 19;
            18:2 -> 23;
            16:0 -> 17;
            16:2 -> 18;
            15:4 -> 16;
            0:0 -> 15;
            24 [label = "<0> void|<1> main|<2> ( )|<3> \\{|<4> 2 BlockItems|<5> \\}"];
            25 [label = "<0> swap|<1>  (  ) ;"];
            24:4 -> 25;
            26 [label = "<0> if (|<1>  |<2> )|<3>  "];
            27 [label = "<0>  |<1> \\<|<2>  "];
            28 [label = "<0>  |<1> +|<2>  "];
            29 [label = "<0> 1"];
            30 [label = "<0> 1"];
            28:0 -> 29;
            28:2 -> 30;
            31 [label = "<0>  |<1> -|<2>  "];
            32 [label = "<0> 2"];
            33 [label = "<0> 1"];
            31:0 -> 32;
            31:2 -> 33;
            27:0 -> 28;
            27:2 -> 31;
            34 [label = "<0> \\{|<1> 1 BlockItems|<2> \\}"];
            35 [label = "<0> while|<1> (|<2>  |<3> )|<4>  "];
            36 [label = "<0>  |<1> \\<=|<2>  "];
            37 [label = "<0>  |<1> *|<2>  "];
            38 [label = "<0> 1"];
            39 [label = "<0> 2"];
            37:0 -> 38;
            37:2 -> 39;
            40 [label = "<0>  |<1> /|<2>  "];
            41 [label = "<0> 3"];
            42 [label = "<0> 4"];
            40:0 -> 41;
            40:2 -> 42;
            36:0 -> 37;
            36:2 -> 40;
            43 [label = "<0> \\{|<1> 1 BlockItems|<2> \\}"];
            44 [label = "<0>  |<1> =|<2>  "];
            45 [label = "<0> i"];
            46 [label = "<0>  |<1> +|<2>  "];
            47 [label = "<0> a"];
            48 [label = "<0> b"];
            46:0 -> 47;
            46:2 -> 48;
            44:0 -> 45;
            44:2 -> 46;
            43:1 -> 44;
            35:2 -> 36;
            35:4 -> 43;
            34:1 -> 35;
            26:1 -> 27;
            26:3 -> 34;
            24:4 -> 26;
            0:0 -> 24;
        }`;        
        window.renderDot = function(str){
            var viz = new Viz();
            viz.renderSVGElement(str)
                .then(function (element) {
                    document.getElementById('app').appendChild(element);
                })
                .catch(error => {
                    // Create a new Viz instance (@see Caveats page for more info)
                    viz = new Viz();

                    // Possibly display the error
                    console.error(error);
                });
        }
        renderDot(str)
    </script>
</body>

</html>